var locale,path,page,baseurl=window.location.origin,mypos={},maps={};!function(t){var a=function(a,n={}){t.ajax({url:baseurl+"/inc/api/"+a+".php",type:"post",data:n,success:function(a){let n=JSON.parse(a);page=n.page,document.title=o(n.title),t("#content").html(n.content),r(),e()}})},e=function(){t("[data-map]").each((function(){let a=self.crypto.randomUUID(),e=JSON.parse(window.atob(t(this).attr("data-map"))),r=e.lat||mypos.lat||0,n=e.lon||mypos.lon||0;t(this).attr("id",a).removeAttr("data-map"),maps[a]=L.map(a,{center:[r,n],zoom:e.zoom||12,preferCanvas:!0,scrollWheelZoom:e.wheelZoom||!1}),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:e.minZoom||4,maxZoom:e.maxZoom||15,attribution:o("Data by")+' <a href="https://openstreetmap.org">openstreetmap.org</a> | '+o("Â© %YEAR%")+' <a href="'+baseurl+'">airportmap.de</a>'}).addTo(maps[a])}))},o=function(t=""){return t.replaceAll("%YEAR%",(new Date).getFullYear())},r=function(){t("[data-i18n]").each((function(){t(this).html(o(t(this).attr("data-i18n"))).removeAttr("data-i18n")})),t("[data-title]").each((function(){t(this).attr("title",o(t(this).attr("data-title"))).removeAttr("data-title")})),t("[data-placeholder]").each((function(){t(this).attr("placeholder",o(t(this).attr("data-placeholder"))).removeAttr("data-placeholder")})),t("[data-href]").each((function(){t(this).attr("href",baseurl+"/"+t(this).attr("data-href")).removeAttr("data-href")})),t("[data-nav]").removeClass("active"),t('[data-nav="'+page+'"]').addClass("active")};t(document).ready((function(){navigator.geolocation.getCurrentPosition((function(t){mypos={lat:t.coords.latitude,lon:t.coords.longitude}})),locale=t.cookie("locale")||"en-US",t("html").attr("lang",locale),function(){switch((path=window.location.pathname.split("/").filter((t=>t)))[0]){default:a("map");break}}()}))}(jQuery);